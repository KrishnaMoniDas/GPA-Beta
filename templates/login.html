<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    
    <title>Graphical Password Selection Interface</title>

  <nav class="navbar bg-primary" data-bs-theme="dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      GPA Beta
    </a>
  </div>
</nav>

  <style>
    #main_container{
      max-width: 720px;
      margin: 0 auto;
      justify-content: center;
    }
  </style>
    
</head>
<body> 

<div id="main_container">
  <!-- grid accordian will be generated here -->
  <div class="accordion" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          <b>Choose Your Icon Based Password Sequence</b>
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          
          <div id="grid">
          <!-- icon grid generation -->
          </div>
          
        </div>
      </div>
    </div>
    </div>
  
<!-- signup detail form section -->
  
  <div id="login_section">

  <form action="/login" method="POST">
    
    <label for="email">Enter your registered email:</label>
		<input type="email" id="email" name="login_email"><br><br>
      
    <label for="textfield">Image Selection Update Checker:</label>
	  <input type="password" id="textfield" name="login_selection"><br><br>
      
		<input type="submit" value="Submit">
	</form>
    
  </div>

  <div id="Notes">
      <footer><b>Instructions</b><br>
      Please click on the icons in a sequence to select your graphical password<br>Please select 8 icons to successfully make your graphical password login</footer>
    </div>


</div>
    <script>
// script is added here for image grid generation and other important functionality

// In this javascript script we are making a function to generate clickable
// image grid with thier respective id's which will be used to track the
// users choices of images(by thier clicking) in order, then we encrypt the end result
// string to store in the database to later verify a user log-in using the user-id
// and the string of encrypted password associated with it
// Author: Krishna Moni Das

function image (link,id){ //function to create images as object with properties link and id
    this.link = link;
    this.id = id;
} 

// creation of image object with two properties - link and id
// thier properties are immutable to maintain security and robustness 

const image0 = new image("https://cdn-icons-png.flaticon.com/128/1559/1559618.png",5); 
const image1 = new image("https://cdn-icons-png.flaticon.com/128/3477/3477145.png",4); 
const image2 = new image("https://cdn-icons-png.flaticon.com/128/765/765560.png",34);
const image3 = new image("https://cdn-icons-png.flaticon.com/128/10158/10158370.png",7);
const image4 = new image("https://cdn-icons-png.flaticon.com/128/3020/3020048.png",45);
const image5 = new image("https://cdn-icons-png.flaticon.com/128/3477/3477085.png",23);
const image6 = new image("https://cdn-icons-png.flaticon.com/128/4921/4921679.png",56);
const image7 = new image("https://cdn-icons-png.flaticon.com/128/4574/4574146.png",45);
const image8 = new image("https://cdn-icons-png.flaticon.com/128/10075/10075734.png",68);
const image9 = new image("https://cdn-icons-png.flaticon.com/128/4589/4589558.png",98);
const image10 = new image("https://cdn-icons-png.flaticon.com/128/10075/10075911.png",6);
const image11 = new image("https://cdn-icons-png.flaticon.com/128/10075/10075731.png",23);
const image12 = new image("https://cdn-icons-png.flaticon.com/128/10075/10075735.png",99);      
const image13 = new image("https://cdn-icons-png.flaticon.com/128/10075/10075913.png",111);
const image14 = new image("https://cdn-icons-png.flaticon.com/128/3137/3137044.png",345);
const image15 = new image("https://cdn-icons-png.flaticon.com/128/5683/5683727.png",674);
const image16 = new image("https://cdn-icons-png.flaticon.com/128/6866/6866548.png",567);
const image17 = new image("https://cdn-icons-png.flaticon.com/128/5721/5721962.png",198);
const image18 = new image("https://cdn-icons-png.flaticon.com/128/7223/7223203.png",109);
const image19 = new image("https://cdn-icons-png.flaticon.com/128/1099/1099794.png",123);

// images can be added manaully by the developer along with their properties

var clicks = 0; // to keep track of the amount of times the user has clicked in order to select the images
const clickAllowed = 8; // how many selection the user can trigger

var finalString = "";

var images = [image0,image1,image2,image3,image4,image5,image6,image7,image8,image9,image10,image11,image12,image13,image14,image15,image16,image17,image18,image19];

images.sort(()=>Math.random() - 0.5); // shuffling the images everytime the user visits the websites

var imageGrid = document.getElementById("grid");
document.getElementById("textfield").value = null;

for(var i=0;i<images.length;i++){
    var img = document.createElement("img");
    img.src = images[i].link;
    img.id = images[i].id;
    img.addEventListener("click",function(){
        if(clicks < clickAllowed){
            document.getElementById("textfield").value += this.id + "";
            finalString = finalString.concat(this.id);
            clicks++;
        }
    });
    imageGrid.appendChild(img);
    
}
//console.log(finalString);


</script>

</body>
</html>